!function(){"use strict";if(!self.fetch){a.prototype.append=function(t,e){t=o(t),e=n(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},a.prototype.delete=function(t){delete this.map[o(t)]},a.prototype.get=function(t){var e=this.map[o(t)];return e?e[0]:null},a.prototype.getAll=function(t){return this.map[o(t)]||[]},a.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},a.prototype.set=function(t,e){this.map[o(t)]=[n(e)]},a.prototype.forEach=function(r,o){Object.getOwnPropertyNames(this.map).forEach(function(e){this.map[e].forEach(function(t){r.call(o,t,e,this)},this)},this)};var i="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),e="FormData"in self,r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.call(f.prototype),h.call(l.prototype),self.Headers=a,self.Request=f,self.Response=l,self.fetch=function(t,e){var r;return r=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e),new Promise(function(o,n){var s=new XMLHttpRequest;s.onload=function(){var t=1223===s.status?204:s.status;if(t<100||599<t)n(new TypeError("Network request failed"));else{var e={status:t,statusText:s.statusText,headers:function(t){var n=new a;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var e=t.trim().split(":"),r=e.shift().trim(),o=e.join(":").trim();n.append(r,o)}),n}(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},r="response"in s?s.response:s.responseText;o(new l(r,e))}},s.onerror=function(){n(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&i&&(s.responseType="blob"),r.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===r._bodyInit?null:r._bodyInit)})},self.fetch.polyfill=!0}function o(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=t.toString()),t}function a(e){this.map={},e instanceof a?e.forEach(function(t,e){this.append(e,t)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function t(t){var e=new FileReader;return e.readAsArrayBuffer(t),u(e)}function h(){return this.bodyUsed=!1,this._initBody=function(t){if("string"==typeof(this._bodyInit=t))this._bodyText=t;else if(i&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw new Error("unsupported BodyInit type");this._bodyText=""}},i?(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(t)},this.text=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader;return e.readAsText(t),u(e)}(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=s(this);return t||Promise.resolve(this._bodyText)},e&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new a(e.headers),this.method=function(t){var e=t.toUpperCase();return-1<r.indexOf(e)?e:t}(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function d(t){var n=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),o=e.join("=").replace(/\+/g," ");n.append(decodeURIComponent(r),decodeURIComponent(o))}}),n}function l(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=200<=this.status&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof a?e.headers:new a(e.headers),this.url=e.url||""}}();
//# sourceMappingURL=fetch.js.map
