!function(a){var b=a(".s3-key-id"),c=a(".s3-secret-key");$s3BucketSelect=a(".s3-bucket-select > select"),$s3RefreshBucketsBtn=a(".s3-refresh-buckets"),$s3RefreshBucketsSpinner=$s3RefreshBucketsBtn.parent().next().children(),$s3UrlPrefixInput=a(".s3-url-prefix"),$s3BucketLocationInput=a(".s3-bucket-location"),refreshingS3Buckets=!1,$s3RefreshBucketsBtn.on("click",function(){if(!$s3RefreshBucketsBtn.hasClass("disabled")){$s3RefreshBucketsBtn.addClass("disabled"),$s3RefreshBucketsSpinner.removeClass("hidden");var a={keyId:b.val(),secret:c.val()};Craft.postActionRequest("assetSources/getS3Buckets",a,function(a,b){if($s3RefreshBucketsBtn.removeClass("disabled"),$s3RefreshBucketsSpinner.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=$s3BucketSelect.val(),d=!1;refreshingS3Buckets=!0,$s3BucketSelect.prop("readonly",!1).empty();for(var e=0;e<a.length;e++)a[e].bucket==c&&(d=!0),$s3BucketSelect.append('<option value="'+a[e].bucket+'" data-url-prefix="'+a[e].urlPrefix+'" data-location="'+a[e].location+'">'+a[e].bucket+"</option>");d&&$s3BucketSelect.val(c),refreshingS3Buckets=!1,d||$s3BucketSelect.trigger("change")}})}}),$s3BucketSelect.on("change",function(){if(!refreshingS3Buckets){var a=$s3BucketSelect.children("option:selected");$s3UrlPrefixInput.val(a.data("url-prefix")),$s3BucketLocationInput.val(a.data("location"))}});var d=a(".rackspace-username"),e=a(".racskspace-api-key"),f=a(".rackspace-region-select > select"),g=a(".rackspace-refresh-regions"),h=g.parent().next().children(),i=a(".rackspace-container-select > select"),j=a(".rackspace-refresh-containers"),k=j.parent().next().children(),l=a(".rackspace-url-prefix"),m=!1;g.on("click",function(){if(!g.hasClass("disabled")){g.addClass("disabled"),h.removeClass("hidden");var a={username:d.val(),apiKey:e.val()};Craft.postActionRequest("assetSources/getRackspaceRegions",a,function(a,b){if(g.removeClass("disabled"),h.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=f.val(),d=!1;f.prop("readonly",!1).empty();for(var e=0;e<a.length;e++)a[e]==c&&(d=!0),f.append('<option value="'+a[e]+'">'+a[e]+"</option>");d&&f.val(c)}})}}),j.on("click",function(){if("-"==f.val())return void alert(Craft.t("Select a region first!"));if(!j.hasClass("disabled")){j.addClass("disabled"),k.removeClass("hidden");var a={username:d.val(),apiKey:e.val(),region:f.val()};Craft.postActionRequest("assetSources/getRackspaceContainers",a,function(a,b){if(j.removeClass("disabled"),k.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=i.val(),d=!1;m=!0,i.prop("readonly",!1).empty();for(var e=0;e<a.length;e++)a[e].container==c&&(d=!0),i.append('<option value="'+a[e].container+'" data-urlprefix="'+a[e].urlPrefix+'">'+a[e].container+"</option>");d&&i.val(c),m=!1,d||i.trigger("change")}})}}),i.on("change",function(){if(!m){var a=i.children("option:selected");l.val(a.data("urlprefix"))}});var n=a(".google-key-id"),o=a(".google-secret-key");$googleBucketSelect=a(".google-bucket-select > select"),$googleRefreshBucketsBtn=a(".google-refresh-buckets"),$googleRefreshBucketsSpinner=$googleRefreshBucketsBtn.parent().next().children(),$googleUrlPrefixInput=a(".google-url-prefix"),refreshingGoogleBuckets=!1,$googleRefreshBucketsBtn.on("click",function(){if(!$googleRefreshBucketsBtn.hasClass("disabled")){$googleRefreshBucketsBtn.addClass("disabled"),$googleRefreshBucketsSpinner.removeClass("hidden");var a={keyId:n.val(),secret:o.val()};Craft.postActionRequest("assetSources/getGoogleCloudBuckets",a,function(a,b){if($googleRefreshBucketsBtn.removeClass("disabled"),$googleRefreshBucketsSpinner.addClass("hidden"),"success"==b)if(a.error)alert(a.error);else if(a.length>0){var c=$googleBucketSelect.val(),d=!1;refreshingGoogleBuckets=!0,$googleBucketSelect.prop("readonly",!1).empty();for(var e=0;e<a.length;e++)a[e].bucket==c&&(d=!0),$googleBucketSelect.append('<option value="'+a[e].bucket+'" data-url-prefix="'+a[e].urlPrefix+'">'+a[e].bucket+"</option>");d&&$googleBucketSelect.val(c),refreshingGoogleBuckets=!1,d||$googleBucketSelect.trigger("change")}})}}),$googleBucketSelect.on("change",function(){if(!refreshingGoogleBuckets){var a=$googleBucketSelect.children("option:selected");$googleUrlPrefixInput.val(a.data("url-prefix"))}});var p=function(){var b=a(this).parents(".field"),c=b.find(".expires-amount").val(),d=b.find(".expires-period select").val(),e=0==parseInt(c,10)||0==d.length?"":c+d;b.find("[type=hidden]").val(e)};a(".expires-amount").on("keyup",p).on("change",p),a(".expires-period select").on("change",p)}(jQuery);
//# sourceMappingURL=asseteditsourcesettings.js.map