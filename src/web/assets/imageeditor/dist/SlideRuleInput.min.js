SlideRuleInput=Garnish.Base.extend({$container:null,$options:null,$selectedOption:null,$input:null,value:null,startPositionX:null,init:function(t,i){this.setSettings(i,SlideRuleInput.defaultSettings),this.value=0,this.graduationsMin=-70,this.graduationsMax=70,this.slideMin=-45,this.slideMax=45,this.$container=$("#"+t),this.$overlay=$('<div class="overlay"></div>').appendTo(this.$container),this.$cursor=$('<div class="cursor"></div>').appendTo(this.$container),this.$graduations=$('<div class="graduations"></div>').appendTo(this.$container),this.$graduationsUl=$("<ul></ul>").appendTo(this.$graduations);for(var s=this.graduationsMin;s<=this.graduationsMax;s++){var a=$('<li class="graduation" data-graduation="'+s+'"><div class="label">'+s+"</div></li>").appendTo(this.$graduationsUl);s%5==0&&a.addClass("main-graduation"),0===s&&a.addClass("selected")}this.$options=this.$container.find(".graduation"),this.addListener(this.$container,"resize",$.proxy(this,"_handleResize")),this.addListener(this.$container,"tapstart",$.proxy(this,"_handleTapStart")),this.addListener(Garnish.$bod,"tapmove",$.proxy(this,"_handleTapMove")),this.addListener(Garnish.$bod,"tapend",$.proxy(this,"_handleTapEnd")),setTimeout($.proxy(function(){this.graduationsCalculatedWidth=10*(this.$options.length-1),this.$graduationsUl.css("left",-this.graduationsCalculatedWidth/2+this.$container.width()/2)},this),50)},_handleResize:function(){var t=this.valueToPosition(this.value);this.$graduationsUl.css("left",t)},_handleTapStart:function(t,i){t.preventDefault(),this.startPositionX=i.position.x,this.startLeft=this.$graduationsUl.position().left,this.dragging=!0,this.onStart()},_handleTapMove:function(t,i){if(this.dragging){t.preventDefault();var s=this.startPositionX-i.position.x,a=this.startLeft-s,n=this.positionToValue(a);this.setValue(n),this.onChange()}},setValue:function(t){var i=this.valueToPosition(t);t<this.slideMin?(t=this.slideMin,i=this.valueToPosition(t)):t>this.slideMax&&(t=this.slideMax,i=this.valueToPosition(t)),this.$graduationsUl.css("left",i),t>=this.slideMin&&t<=this.slideMax&&(this.$options.removeClass("selected"),$.each(this.$options,function(i,s){$(s).data("graduation")>0&&$(s).data("graduation")<=t&&$(s).addClass("selected"),$(s).data("graduation")<0&&$(s).data("graduation")>=t&&$(s).addClass("selected"),0==$(s).data("graduation")&&$(s).addClass("selected")})),this.value=t},_handleTapEnd:function(t){this.dragging&&(t.preventDefault(),this.dragging=!1,this.onEnd())},positionToValue:function(t){var i=-1*this.graduationsMin,s=-1*(this.graduationsMin-this.graduationsMax);return(this.$graduations.width()/2+-1*t)/this.graduationsCalculatedWidth*s-i},valueToPosition:function(t){var i=-1*this.graduationsMin,s=-1*(this.graduationsMin-this.graduationsMax);return-((t+i)*this.graduationsCalculatedWidth/s-this.$graduations.width()/2)},onStart:function(){"function"==typeof this.settings.onChange&&this.settings.onStart(this)},onChange:function(){"function"==typeof this.settings.onChange&&this.settings.onChange(this)},onEnd:function(){"function"==typeof this.settings.onChange&&this.settings.onEnd(this)},defaultSettings:{onStart:$.noop,onChange:$.noop,onEnd:$.noop}});
//# sourceMappingURL=SlideRuleInput.min.js.map