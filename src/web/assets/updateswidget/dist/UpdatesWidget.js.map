{"version":3,"file":"UpdatesWidget.js","mappings":"YAAA,IAAUA,EAAAA,EA6EPC,OA1ECC,MAAMC,cAAgBC,QAAQC,KAAKC,OAAO,CACtCC,QAAS,KACTC,MAAO,KACPC,KAAM,KACNC,UAAU,EAEVC,KAAM,SAASC,EAAUC,GACrBC,KAAKP,QAAUP,EAAE,UAAYY,GAC7BE,KAAKN,MAAQM,KAAKP,QAAQQ,KAAK,eAC/BD,KAAKE,UAEAH,GACDC,KAAKG,iBAAgB,IAI7BD,QAAS,WACLF,KAAKL,KAAOK,KAAKN,MAAMO,KAAK,cAC5BD,KAAKI,YAAYJ,KAAKL,KAAM,SAAS,WACjCK,KAAKG,iBAAgB,OAI7BE,qBAAsB,WAClBL,KAAKJ,UAAW,EAChBI,KAAKP,QAAQa,SAAS,WACtBN,KAAKL,KAAKW,SAAS,aAGvBC,yBAA0B,WACtBP,KAAKJ,UAAW,EAChBI,KAAKP,QAAQe,YAAY,YAG7BL,gBAAiB,SAASM,GAClBT,KAAKJ,WAITI,KAAKK,uBACLjB,MAAMsB,GAAGP,gBAAgBM,GAAc,EAAOT,KAAKW,eAAeC,KAAKZ,SAG3EW,eAAgB,SAASE,GAIjB,IAAIC,EAHRd,KAAKO,2BAEDM,EAAKE,OAIDD,EADc,GAAdD,EAAKE,MACQ3B,MAAM4B,EAAE,MAAO,yBAEf5B,MAAM4B,EAAE,MAAO,6BAA8B,CAACD,MAAOF,EAAKE,QAG3Ef,KAAKN,MAAMuB,KACP,0BACAH,EACA,+BAAiC1B,MAAM8B,OAAO,qBAAuB,KAAO9B,MAAM4B,EAAE,MAAO,iBAF3F,cAMJhB,KAAKN,MAAMuB,KACP,0BAA4B7B,MAAM4B,EAAE,MAAO,gCAA3C,oFACkF5B,MAAM4B,EAAE,MAAO,eAAiB,iBAGtHhB,KAAKE,WAITd,MAAMsB,GAAGS,0B","sources":["webpack:///./UpdatesWidget.js"],"sourcesContent":["(function($) {\n    /** global: Craft */\n    /** global: Garnish */\n    Craft.UpdatesWidget = Garnish.Base.extend({\n        $widget: null,\n        $body: null,\n        $btn: null,\n        checking: false,\n\n        init: function(widgetId, cached) {\n            this.$widget = $('#widget' + widgetId);\n            this.$body = this.$widget.find('.body:first');\n            this.initBtn();\n\n            if (!cached) {\n                this.checkForUpdates(false);\n            }\n        },\n\n        initBtn: function() {\n            this.$btn = this.$body.find('.btn:first');\n            this.addListener(this.$btn, 'click', function() {\n                this.checkForUpdates(true);\n            });\n        },\n\n        lookLikeWereChecking: function() {\n            this.checking = true;\n            this.$widget.addClass('loading');\n            this.$btn.addClass('disabled');\n        },\n\n        dontLookLikeWereChecking: function() {\n            this.checking = false;\n            this.$widget.removeClass('loading');\n        },\n\n        checkForUpdates: function(forceRefresh) {\n            if (this.checking) {\n                return;\n            }\n\n            this.lookLikeWereChecking();\n            Craft.cp.checkForUpdates(forceRefresh, false, this.showUpdateInfo.bind(this));\n        },\n\n        showUpdateInfo: function(info) {\n            this.dontLookLikeWereChecking();\n\n            if (info.total) {\n                var updateText;\n\n                if (info.total == 1) {\n                    updateText = Craft.t('app', 'One update available!');\n                } else {\n                    updateText = Craft.t('app', '{total} updates available!', {total: info.total});\n                }\n\n                this.$body.html(\n                    '<p class=\"centeralign\">' +\n                    updateText +\n                    ' <a class=\"go nowrap\" href=\"' + Craft.getUrl('utilities/updates') + '\">' + Craft.t('app', 'Go to Updates') + '</a>' +\n                    '</p>'\n                );\n            } else {\n                this.$body.html(\n                    '<p class=\"centeralign\">' + Craft.t('app', 'Congrats! Youâ€™re up to date.') + '</p>' +\n                    '<p class=\"centeralign\"><button type=\"button\" class=\"btn\" data-icon=\"refresh\">' + Craft.t('app', 'Check again') + '</button></p>'\n                );\n\n                this.initBtn();\n            }\n\n            // Update the CP header badge\n            Craft.cp.updateUtilitiesBadge();\n        }\n    });\n})(jQuery);\n"],"names":["$","jQuery","Craft","UpdatesWidget","Garnish","Base","extend","$widget","$body","$btn","checking","init","widgetId","cached","this","find","initBtn","checkForUpdates","addListener","lookLikeWereChecking","addClass","dontLookLikeWereChecking","removeClass","forceRefresh","cp","showUpdateInfo","bind","info","updateText","total","t","html","getUrl","updateUtilitiesBadge"],"sourceRoot":""}