{"version":3,"file":"recoverycodes.js","mappings":"AAkDGA,OA/CDC,MAAMC,iBAAmBC,QAAQC,KAAKC,OACpC,CACEC,KAAM,SAAUC,EAAMC,EAAWC,GAC/B,IAAMC,EAAYH,EAAKI,cAAc,4BAC/BC,EAAYL,EAAKI,cAAc,iBAErCE,KAAKC,YAAYJ,EAAW,SAAS,SAACK,GACa,KAA7CL,EAAUM,MAAMC,QAAQ,KAAM,IAAIC,QACpCX,EAAKY,eAET,IAEAN,KAAKC,YAAYP,EAAM,UAAU,SAACQ,GAChCA,EAAGK,iBAECR,EAAUS,UAAUC,SAAS,aAIjCV,EAAUS,UAAUE,IAAI,WAExBtB,MAAMuB,kBAAkB,OAAQ,4BAA6B,CAC3DC,KAAM,CACJC,KAAMhB,EAAUM,SAGjBW,MAAK,WACJnB,GACF,IACCoB,OAAM,SAACC,GAAM,QACZpB,EAAUoB,SAAW,QAAV,EAADA,EAAGC,gBAAQ,OAAM,QAAN,EAAX,EAAaL,YAAI,WAAhB,EAAD,EAAmBM,QAC/B,IACCC,SAAQ,WACPpB,EAAUS,UAAUY,OAAO,UAC7B,IACJ,GACF,GAEF,CACEC,OAAQ,wCAIZjC,MAAMkC,wBACJlC,MAAMC,iBAAiBgC,OACvBjC,MAAMC","sources":["webpack:///./RecoveryCodeForm.js"],"sourcesContent":["(function ($) {\n  /** global: Craft */\n  /** global: Garnish */\n  Craft.RecoveryCodeForm = Garnish.Base.extend(\n    {\n      init: function (form, onSuccess, showError) {\n        const codeInput = form.querySelector('input.auth-recovery-code');\n        const submitBtn = form.querySelector('button.submit');\n\n        this.addListener(codeInput, 'input', (ev) => {\n          if (codeInput.value.replace(/-/g, '').length === 12) {\n            form.requestSubmit();\n          }\n        });\n\n        this.addListener(form, 'submit', (ev) => {\n          ev.preventDefault();\n\n          if (submitBtn.classList.contains('loading')) {\n            return;\n          }\n\n          submitBtn.classList.add('loading');\n\n          Craft.sendActionRequest('POST', 'auth/verify-recovery-code', {\n            data: {\n              code: codeInput.value,\n            },\n          })\n            .then(() => {\n              onSuccess();\n            })\n            .catch((e) => {\n              showError(e?.response?.data?.message);\n            })\n            .finally(() => {\n              submitBtn.classList.remove('loading');\n            });\n        });\n      },\n    },\n    {\n      METHOD: 'craft\\\\auth\\\\methods\\\\RecoveryCodes',\n    }\n  );\n\n  Craft.registerAuthFormHandler(\n    Craft.RecoveryCodeForm.METHOD,\n    Craft.RecoveryCodeForm\n  );\n})(jQuery);\n"],"names":["jQuery","Craft","RecoveryCodeForm","Garnish","Base","extend","init","form","onSuccess","showError","codeInput","querySelector","submitBtn","this","addListener","ev","value","replace","length","requestSubmit","preventDefault","classList","contains","add","sendActionRequest","data","code","then","catch","e","response","message","finally","remove","METHOD","registerAuthFormHandler"],"sourceRoot":""}