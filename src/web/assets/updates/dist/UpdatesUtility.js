!function(){var e={827:function(){},279:function(e,t,a){var n=a(827);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,a(673).Z)("43063986",n,!0,{})},673:function(e,t,a){"use strict";function n(e,t){for(var a=[],n={},s=0;s<t.length;s++){var i=t[s],r=i[0],o={id:e+":"+s,css:i[1],media:i[2],sourceMap:i[3]};n[r]?n[r].parts.push(o):a.push(n[r]={id:r,parts:[o]})}return a}a.d(t,{Z:function(){return f}});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},r=s&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,d=!1,p=function(){},u=null,c="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,a,s){d=a,u=s||{};var r=n(e,t);return g(r),function(t){for(var a=[],s=0;s<r.length;s++){var o=r[s];(l=i[o.id]).refs--,a.push(l)}for(t?g(r=n(e,t)):r=[],s=0;s<a.length;s++){var l;if(0===(l=a[s]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete i[l.id]}}}}function g(e){for(var t=0;t<e.length;t++){var a=e[t],n=i[a.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](a.parts[s]);for(;s<a.parts.length;s++)n.parts.push(b(a.parts[s]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var r=[];for(s=0;s<a.parts.length;s++)r.push(b(a.parts[s]));i[a.id]={id:a.id,refs:1,parts:r}}}}function v(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function b(e){var t,a,n=document.querySelector("style["+c+'~="'+e.id+'"]');if(n){if(d)return p;n.parentNode.removeChild(n)}if(h){var s=l++;n=o||(o=v()),t=U.bind(null,n,s,!1),a=U.bind(null,n,s,!0)}else n=v(),t=C.bind(null,n),a=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else a()}}var m,I=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function U(e,t,a,n){var s=a?"":n.css;if(e.styleSheet)e.styleSheet.cssText=I(t,s);else{var i=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function C(e,t){var a=t.css,n=t.media,s=t.sourceMap;if(n&&e.setAttribute("media",n),u.ssrId&&e.setAttribute(c,t.id),s&&(a+="\n/*# sourceURL="+s.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,a),i.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";a(279),function(e){Craft.UpdatesUtility=Garnish.Base.extend({$body:null,showUpdates:!1,criticalUpdateAvailable:!1,allowUpdates:null,installableUpdates:null,init:function(){var t=this;this.$body=e("#content");var a=e("#graphic"),n=e("#status");this.installableUpdates=[],Craft.cp.checkForUpdates(!0,!0,(function(s){if(t.allowUpdates=s.allowUpdates,s.updates.cms&&t.processUpdate(s.updates.cms,!1),s.updates.plugins&&s.updates.plugins.length)for(var i=0;i<s.updates.plugins.length;i++)t.processUpdate(s.updates.plugins[i],!0);if(t.showUpdates){if(a.remove(),n.remove(),t.installableUpdates.length){var r=Craft.t("app","{num, number} {num, plural, =1{Available Update} other{Available Updates}}",{num:t.installableUpdates.length});e("#header h1").text(r)}t.allowUpdates&&t.installableUpdates.length>1&&t.createUpdateForm(Craft.t("app","Update all"),t.installableUpdates).insertAfter(e("#header > .flex:last"))}else a.removeClass("spinner").addClass("success"),n.text(Craft.t("app","Youâ€™re all up to date!"))}))},processUpdate:function(e,a){if(e.releases.length||e.abandoned){this.showUpdates=!0;var n=new t(this,e,a);n.installable&&this.installableUpdates.push(n)}},createUpdateForm:function(t,a){var n=e("<form/>",{method:"post"});n.append(Craft.getCsrfInput()),n.append(e("<input/>",{type:"hidden",name:"action",value:"updater"})),n.append(e("<input/>",{type:"hidden",name:"return",value:"utilities/updates"}));for(var s=0;s<a.length;s++)n.append(e("<input/>",{type:"hidden",name:"install["+a[s].updateInfo.handle+"]",value:a[s].updateInfo.latestVersion})),n.append(e("<input/>",{type:"hidden",name:"packageNames["+a[s].updateInfo.handle+"]",value:a[s].updateInfo.packageName}));return n.append(e("<button/>",{type:"submit",text:t,class:"btn submit"})),n}});var t=Garnish.Base.extend({updateInfo:null,isPlugin:null,installable:!1,$container:null,$header:null,$contents:null,$releaseContainer:null,$showAllLink:null,licenseHud:null,$licenseSubmitBtn:null,licenseSubmitAction:null,init:function(t,a,n){this.updatesPage=t,this.updateInfo=a,this.isPlugin=n,this.installable=!!this.updateInfo.releases.length,this.createPane(),this.initReleases(),this.createHeading(),this.createCta(),this.updateInfo.abandoned?e('<blockquote class="note"><p>'+this.updateInfo.statusText+"</p></blockquote>").insertBefore(this.$releaseContainer):"eligible"!==this.updateInfo.status&&(e('<blockquote class="note ineligible"><p>'+this.updateInfo.statusText+"</p></blockquote>").insertBefore(this.$releaseContainer),"expired"!==this.updateInfo.status&&null!==this.updateInfo.latestVersion||(this.installable=!1))},createPane:function(){this.$container=e('<div class="update"/>').appendTo(this.updatesPage.$body),this.$header=e('<div class="update-header"/>').appendTo(this.$container),this.$contents=e('<div class="readable"/>').appendTo(this.$container),this.$releaseContainer=e('<div class="releases"/>').appendTo(this.$contents)},createHeading:function(){e('<div class="readable left"/>').appendTo(this.$header).append(e("<h2/>",{text:this.updateInfo.name}))},createCta:function(){if(this.updatesPage.allowUpdates&&this.updateInfo.latestVersion&&!1!==this.updateInfo.ctaUrl){var t=e('<div class="buttons right"/>').appendTo(this.$header);void 0!==this.updateInfo.ctaUrl?e("<a/>",{class:"btn submit",text:this.updateInfo.ctaText,href:this.updateInfo.ctaUrl}).appendTo(t):this.updatesPage.createUpdateForm(this.updateInfo.ctaText,[this]).appendTo(t)}},initReleases:function(){for(var e=0;e<this.updateInfo.releases.length;e++)new a(this,this.updateInfo.releases[e])}}),a=Garnish.Base.extend({update:null,releaseInfo:null,notesId:null,$container:null,$accordionTrigger:null,init:function(e,t){this.update=e,this.releaseInfo=t,this.notesId="notes-"+Math.floor(1e6*Math.random()),this.triggerId="".concat(this.notesId,"-trigger"),this.createContainer(),this.createHeading(),this.releaseInfo.notes&&(this.createReleaseNotes(),new Craft.Accordion(this.$accordionTrigger))},createContainer:function(){this.$container=e('<div class="pane release"/>').appendTo(this.update.$releaseContainer),this.releaseInfo.critical&&this.$container.addClass("release--critical")},createHeading:function(){var t,a=e("<h3/>",{class:"release-heading"}).appendTo(this.$container);this.releaseInfo.notes?(t=e("<a/>",{id:this.triggerId,class:"release-info fieldtoggle","aria-controls":this.notesId,"aria-expanded":"false",tabindex:"0",role:"button"}),this.$accordionTrigger=t):t=e("<div/>",{class:"release-info"}),t.appendTo(a),e("<span/>",{text:this.releaseInfo.version}).appendTo(t),this.releaseInfo.critical&&e("<strong/>",{class:"release-badge",text:Craft.t("app","Critical")}).appendTo(t),this.releaseInfo.date&&e("<span/>",{class:"release-date",text:Craft.formatDate(this.releaseInfo.date)}).appendTo(t)},createReleaseNotes:function(){var t=e("<div/>",{id:this.notesId,role:"region","aria-labelledby":this.triggerId}).appendTo(this.$container).append(e("<div/>",{class:"release-notes"}).html(this.releaseInfo.notes.replace(/(<\/?h)(3|4|5)\b/g,(function(e,t,a){return"".concat(t).concat(parseInt(a)+1,' class="h').concat(a,'"')}))));if(this.releaseInfo.critical||t.find("blockquote").length){if(!this.$accordionTrigger)return;this.$accordionTrigger.addClass("expanded").attr("aria-expanded","true")}else t.addClass("hidden")}},{maxInitialUpdateHeight:500})}(jQuery)}()}();
//# sourceMappingURL=UpdatesUtility.js.map