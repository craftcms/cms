!function(){var t;t=jQuery,Craft.ClearCachesUtility=Garnish.Base.extend({init:function(a){for(var e=this,r=t("form.utility"),s=function(t){var a=r.eq(t),s=a.find("input[type=checkbox]"),o=a.find(".btn"),i=function(){s.filter(":checked").length?o.removeClass("disabled"):o.addClass("disabled")};s.on("change",i),i(),e.addListener(a,"submit",(function(t){t.preventDefault(),o.hasClass("disabled")||e.onSubmit(t)}))},o=0;o<r.length;o++)s(o)},onSubmit:function(a){var e,r,s=t(a.currentTarget),o=s.find("button.submit"),i=s.find(".utility-status");o.hasClass("disabled")||(s.data("progressBar")?((e=s.data("progressBar")).resetProgressBar(),r=s.data("allDone")):(e=new Craft.ProgressBar(i),s.data("progressBar",e)),e.$progressBar.removeClass("hidden"),e.$progressBar.velocity("stop").velocity({opacity:1},{complete:function(){var a=Garnish.getPostData(s),n=Craft.expandPostArray(a);Craft.postActionRequest(n.action,n,(function(a,n){a&&a.error&&alert(a.error),e.setProgressPercentage(100),setTimeout((function(){r||((r=t('<div class="alldone" data-icon="done" />').appendTo(i)).css("opacity",0),s.data("allDone",r)),e.$progressBar.velocity({opacity:0},{duration:"fast",complete:function(){r.velocity({opacity:1},{duration:"fast"}),o.removeClass("disabled"),o.trigger("focus")}})}),300)}),{complete:t.noop})}}),r&&r.css("opacity",0),o.addClass("disabled"),o.trigger("blur"))}})}();
//# sourceMappingURL=ClearCachesUtility.js.map