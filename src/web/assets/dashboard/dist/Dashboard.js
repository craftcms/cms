/*! For license information please see Dashboard.js.LICENSE.txt */
(function(){var __webpack_modules__={242:function(){},277:function(t,e,n){var i=n(242);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,n(673).Z)("32dd7842",i,!0,{})},673:function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],s=a[0],o={id:t+":"+r,css:a[1],media:a[2],sourceMap:a[3]};i[s]?i[s].parts.push(o):n.push(i[s]={id:s,parts:[o]})}return n}n.d(e,{Z:function(){return g}});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},s=r&&(document.head||document.getElementsByTagName("head")[0]),o=null,d=0,l=!1,c=function(){},h=null,u="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(t,e,n,r){l=n,h=r||{};var s=i(t,e);return f(s),function(e){for(var n=[],r=0;r<s.length;r++){var o=s[r];(d=a[o.id]).refs--,n.push(d)}for(e?f(s=i(t,e)):s=[],r=0;r<n.length;r++){var d;if(0===(d=n[r]).refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete a[d.id]}}}}function f(t){for(var e=0;e<t.length;e++){var n=t[e],i=a[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(v(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(v(n.parts[r]));a[n.id]={id:n.id,refs:1,parts:s}}}}function m(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function v(t){var e,n,i=document.querySelector("style["+u+'~="'+t.id+'"]');if(i){if(l)return c;i.parentNode.removeChild(i)}if(p){var r=d++;i=o||(o=m()),e=_.bind(null,i,r,!1),n=_.bind(null,i,r,!0)}else i=m(),e=b.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var w,y=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(e,r);else{var a=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}function b(t,e){var n=e.css,i=e.media,r=e.sourceMap;if(i&&t.setAttribute("media",i),h.ssrId&&t.setAttribute(u,e.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var __webpack_exports__={};!function(){"use strict";var _dashboard_scss__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(277),_dashboard_scss__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_dashboard_scss__WEBPACK_IMPORTED_MODULE_0__);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var a=e&&e.prototype instanceof v?e:v,s=Object.create(a.prototype),o=new I(i||[]);return r(s,"_invoke",{value:k(t,n,o)}),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var u="suspendedStart",p="suspendedYield",g="executing",f="completed",m={};function v(){}function w(){}function y(){}var _={};l(_,s,(function(){return this}));var b=Object.getPrototypeOf,$=b&&b(b(B([])));$&&$!==n&&i.call($,s)&&(_=$);var C=y.prototype=v.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(r,a,s,o){var d=h(t[r],t,a);if("throw"!==d.type){var l=d.arg,c=l.value;return c&&"object"==_typeof(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,s,o)}),(function(t){n("throw",t,s,o)})):e.resolve(c).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,o)}))}o(d.arg)}var a;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return a=a?a.then(r,r):r()}})}function k(e,n,i){var r=u;return function(a,s){if(r===g)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw s;return{value:t,done:!0}}for(i.method=a,i.arg=s;;){var o=i.delegate;if(o){var d=E(o,i);if(d){if(d===m)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===u)throw r=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var l=h(e,n,i);if("normal"===l.type){if(r=i.done?f:p,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=f,i.method="throw",i.arg=l.arg)}}}function E(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var a=h(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var s=a.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(_typeof(e)+" is not iterable")}return w.prototype=y,r(C,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:w,configurable:!0}),w.displayName=l(y,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,d,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},S(L.prototype),l(L.prototype,o,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var s=new L(c(t,n,i,r),a);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(C),l(C,d,"Generator"),l(C,s,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=B,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return o.type="throw",o.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var d=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(d&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(d){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;x(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:B(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}function asyncGeneratorStep(t,e,n,i,r,a,s){try{var o=t[a](s),d=o.value}catch(t){return void n(t)}o.done?e(d):Promise.resolve(d).then(i,r)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){asyncGeneratorStep(a,i,r,s,o,"next",t)}function o(t){asyncGeneratorStep(a,i,r,s,o,"throw",t)}s(void 0)}))}}(function($){Craft.Dashboard=Garnish.Base.extend({$grid:null,$widgetManagerBtn:null,$newWidgetBtn:null,widgetTypes:null,grid:null,widgets:null,widgetManager:null,widgetAdminTable:null,widgetSettingsModal:null,init:function(t){var e=this;this.widgetTypes=t,this.widgets={},this.$widgetManagerBtn=$("#widgetManagerBtn"),this.$newWidgetBtn=$("#newwidgetmenubtn"),this.addListener(this.$widgetManagerBtn,"click","showWidgetManager"),Garnish.$doc.ready((function(){e.$grid=$("#dashboard-grid"),e.grid=e.$grid.data("grid"),e.addListener("#new-widget-menu a","click",(function(t){t.preventDefault(),e.handleNewWidgetOptionSelect(t)})),e.addListener("#new-widget-menu a","keydown",(function(t){t.keyCode!==Garnish.SPACE_KEY&&t.keyCode!==Garnish.RETURN_KEY||(t.preventDefault(),e.handleNewWidgetOptionSelect(t))})),e.$grid.trigger("scroll")}))},getTypeInfo:function(t,e,n){return e?void 0===this.widgetTypes[t][e]?n:this.widgetTypes[t][e]:this.widgetTypes[t]},handleNewWidgetOptionSelect:function(t){this.$newWidgetBtn.data("trigger").hide();var e=$(t.target);this.createWidget(e.data("type"),e.data("name"))},createWidget:function createWidget(type,name,responseData){var settingsNamespace=void 0===responseData?"newwidget".concat(Math.floor(1e9*Math.random()),"-settings"):"widget".concat(responseData.id,"-settings"),settingsHtml=void 0===responseData?this.getTypeInfo(type,"settingsHtml","").replace(/__NAMESPACE__/g,settingsNamespace):null,settingsJs=void 0===responseData?this.getTypeInfo(type,"settingsJs","").replace(/__NAMESPACE__/g,settingsNamespace):null,$gridItem=$('<div class="item" data-colspan="1" style="display: block">'),$container=$("<div/>",{class:"widget new loading-new scaleout","data-type":type}).addClass(type.toLowerCase()).append($("<div/>",{class:"front"}).append($("<div/>",{class:"pane"}).append($("<div/>",{class:"spinner body-loading"})).append($("<div/>",{class:"widget-heading"}).append("<h2/>").append("<h5/>")).append($("<div/>",{class:"body"})).append($("<div/>",{class:"settings icon hidden"})))).append($("<div/>",{class:"back"}).append($("<form/>",{class:"pane"}).append($("<input/>",{type:"hidden",name:"type",value:type})).append($("<input/>",{type:"hidden",name:"settingsNamespace",value:settingsNamespace})).append($("<h2/>",{class:"first",text:Craft.t("app","{type} Settings",{type:name})})).append($("<div/>",{class:"settings"})).append("<hr/>").append($("<div/>",{class:"buttons clearafter"}).append(Craft.ui.createSubmitButton({label:Craft.t("app","Save"),spinner:!0})).append($("<button/>",{type:"button",class:"btn cancel-btn",text:Craft.t("app","Cancel")}))))).appendTo($gridItem);settingsHtml?($container.addClass("flipped"),$container.children(".front").addClass("hidden")):($container.addClass("loading"),$container.children(".back").addClass("hidden"));var widget=new Craft.Widget($container,settingsHtml?settingsHtml.replace(/__NAMESPACE__/g,settingsNamespace):null,settingsJs?function(){eval(settingsJs)}:$.noop);if(this.grid.$items.length?$gridItem.insertAfter(this.grid.$items.last()):$gridItem.prependTo(this.grid.$container),this.grid.addItems($gridItem),Garnish.scrollContainerToElement($gridItem),$container.removeClass("scaleout"),void 0!==responseData)$container.removeClass("loading"),widget.update(responseData);else if(!settingsHtml){var data={type:type};Craft.queue.push((function(){return new Promise((function(t){Craft.sendActionRequest("POST","dashboard/create-widget",{data:data}).then((function(t){$container.removeClass("loading"),widget.update(t.data)})).catch((function(){widget.destroy()})).finally(t)}))}))}},showWidgetManager:function(){var t=this;if(this.widgetManager)this.widgetManager.show();else{for(var e=this.$grid.find("> .item > .widget"),n=$('<form method="post" accept-charset="UTF-8"><input type="hidden" name="action" value="widgets/save-widget"/></form>').appendTo(Garnish.$bod),i=$('<p id="nowidgets" class="zilch small'+(e.length?" hidden":"")+'">'+Craft.t("app","You don’t have any widgets yet.")+"</p>").appendTo(n),r=$('<table class="data'+(e.length?"":" hidden")+'" role="presentation"/>').appendTo(n),a=$("<tbody/>").appendTo(r),s=0;s<e.length;s++){var o=e.eq(s).data("widget");o&&o.id&&o.getManagerRow().appendTo(a)}this.widgetManager=new Garnish.HUD(this.$widgetManagerBtn,n,{hudClass:"hud widgetmanagerhud",onShow:function(){t.$widgetManagerBtn.addClass("active").attr("aria-expanded","true")},onHide:function(){t.$widgetManagerBtn.removeClass("active").attr("aria-expanded","false")}}),this.widgetAdminTable=new Craft.AdminTable({tableSelector:r,noObjectsSelector:i,sortable:!0,reorderAction:"dashboard/reorder-user-widgets",deleteAction:"dashboard/delete-user-widget",confirmDeleteMessage:null,deleteSuccessMessage:null,noItemsSelector:"#nowidgets",onReorderItems:function(e){for(var n=null,i=0;i<e.length;i++){var r=t.widgets[e[i]];n?r.$gridItem.insertAfter(n.$gridItem):r.$gridItem.prependTo(t.$grid),n=r}t.grid.resetItemOrder()},onDeleteItem:function(e){var n=t.widgets[e];n.destroy();var i=Craft.ui.createButton({label:Craft.t("app","Undo"),spinner:!0}),r=Craft.cp.displaySuccess(Craft.t("app","“{name}” deleted.",{name:n.getLabel()}),{details:i});i.on("click",(function(){if(!i.hasClass("loading")){i.addClass("loading");var e={type:n.type,settings:n.storedSettings};Craft.sendActionRequest("POST","dashboard/create-widget",{data:e}).then((function(e){t.createWidget(n.type,n.getLabel(),e.data),i.off("click"),r.close()})).finally((function(){i.removeClass("loading")}))}}))}})}}}),Craft.Widget=Garnish.Base.extend({$container:null,$gridItem:null,$front:null,$settingsBtn:null,$title:null,$subtitle:null,$heading:null,$bodyContainer:null,$back:null,$settingsForm:null,$settingsContainer:null,$settingsToggle:null,$saveBtn:null,$settingsErrorList:null,id:null,type:null,title:null,subtitle:null,storedSettings:null,totalCols:null,settingsHtml:null,initSettingsFn:null,showingSettings:!1,colspanPicker:null,init:function(t,e,n,i){this.$container=$(t),this.storedSettings=i,this.$settingsToggle=this.$container.find("[data-settings-toggle]"),this.$gridItem=this.$container.parent(),this.$container.data("widget",this),this.id=this.$container.data("id"),this.type=this.$container.data("type"),this.title=this.$container.data("title"),this.id&&(window.dashboard.widgets[this.id]=this),this.$front=this.$container.children(".front"),this.$settingsBtn=this.$front.find("> .pane > .icon.settings"),this.$heading=this.$front.find("> .pane > .widget-heading"),this.$title=this.$heading.find("> h2"),this.$subtitle=this.$heading.find("> h5"),this.$bodyContainer=this.$front.find("> .pane > .body"),this.setSettingsHtml(e,n),this.$container.hasClass("flipped")?(this.initBackUi(),this.refreshSettings(),this.onShowBack()):this.onShowFront(),this.addListener(this.$settingsBtn,"click","showSettings")},initBackUi:function(){this.$back=this.$container.children(".back"),this.$settingsForm=this.$back.children("form"),this.$settingsContainer=this.$settingsForm.children(".settings");var t=this.$settingsForm.children(".buttons");this.$saveBtn=t.children("button[type=submit]"),this.addListener(t.children(".cancel-btn"),"click","cancelSettings"),this.addListener(this.$settingsForm,"submit","saveSettings")},getColspan:function(){return this.$gridItem.data("colspan")},setColspan:function(t){this.$gridItem.data("colspan",t).attr("data-colspan",t),window.dashboard.grid.refreshCols(!0)},getTypeInfo:function(t,e){return window.dashboard.getTypeInfo(this.type,t,e)},setSettingsHtml:function(t,e){this.settingsHtml=t,this.initSettingsFn=e,this.settingsHtml?this.$settingsBtn.removeClass("hidden"):this.$settingsBtn.addClass("hidden")},refreshSettings:function(){var t=this;this.$settingsContainer.html(this.settingsHtml),Garnish.requestAnimationFrame((function(){Craft.initUiElements(t.$settingsContainer),t.initSettingsFn()}))},showSettings:function(){var t=this;this.$back||this.initBackUi(),this.refreshSettings(),this.$back.removeClass("hidden"),setTimeout((function(){t.$container.addClass("flipped").velocity({height:t.$back.height()},{complete:t.onShowBack.bind(t)})}),100)},hideSettings:function(){var t=this;this.$front.removeClass("hidden"),setTimeout((function(){t.$container.removeClass("flipped").velocity({height:t.$front.height()},{complete:t.onShowFront.bind(t)}),t.$settingsToggle.focus()}),100)},saveSettings:function(t){var e=this;t.preventDefault(),this.$saveBtn.hasClass("loading")||(this.$saveBtn.addClass("loading"),Craft.queue.push((function(){return new Promise((function(t){var n=e.$container.hasClass("new")?"dashboard/create-widget":"dashboard/save-widget-settings",i=e.$settingsForm.serialize();Craft.sendActionRequest("POST",n,{data:i}).then((function(t){e.$settingsErrorList&&(e.$settingsErrorList.remove(),e.$settingsErrorList=null),Craft.cp.displaySuccess(Craft.t("app","Widget saved.")),t.data.info?(e.update(t.data),e.hideSettings()):e.destroy()})).catch((function(t){var n=t.response;e.$settingsErrorList&&(e.$settingsErrorList.remove(),e.$settingsErrorList=null),Craft.cp.displayError(Craft.t("app","Couldn’t save widget.")),n.data.errors&&(e.$settingsErrorList=Craft.ui.createErrorList(n.data.errors).insertAfter(e.$settingsContainer))})).finally((function(){e.$saveBtn.removeClass("loading"),t()}))}))})))},update:function update(response){var _this7=this;return _asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this7.$back||_this7.initBackUi(),_this7.title=response.info.title,_this7.subtitle=response.info.subtitle,_this7.storedSettings=response.info.settings,_this7.$container.hasClass("new")?(_this7.id=response.info.id,_this7.$container.attr("id","widget"+_this7.id).removeClass("new loading-new"),_this7.$settingsForm&&_this7.$settingsForm.prepend('<input type="hidden" name="widgetId" value="'+_this7.id+'"/>'),window.dashboard.widgets[_this7.id]=_this7,window.dashboard.widgetAdminTable&&window.dashboard.widgetAdminTable.addRow(_this7.getManagerRow())):window.dashboard.widgetAdminTable&&window.dashboard.widgetAdminTable.$tbody.children('[data-id="'+_this7.id+'"]:first').children("td:nth-child(2)").html(_this7.getManagerRowLabel()),_this7.title||_this7.subtitle?(_this7.title?_this7.$title.text(_this7.title):_this7.$title.remove(),_this7.subtitle?_this7.$subtitle.text(_this7.subtitle):_this7.$subtitle.remove()):_this7.$heading.remove(),_this7.$bodyContainer.html(response.info.bodyHtml),response.info.colspan!=_this7.getColspan()&&(_this7.setColspan(response.info.colspan),Garnish.scrollContainerToElement(_this7.$gridItem)),Craft.initUiElements(_this7.$bodyContainer),_context.next=11,Craft.appendHeadHtml(response.headHtml);case 11:return _context.next=13,Craft.appendBodyHtml(response.bodyHtml);case 13:Craft.cp.elementThumbLoader.load(_this7.$bodyContainer),_this7.setSettingsHtml(response.info.settingsHtml,(function(){eval(response.info.settingsJs)}));case 15:case"end":return _context.stop()}}),_callee)})))()},cancelSettings:function(){this.id?this.hideSettings():this.destroy()},onShowFront:function(){this.showingSettings=!1,this.removeListener(this.$back,"resize"),this.addListener(this.$front,"resize","updateContainerHeight"),this.$back&&this.$back.addClass("hidden")},onShowBack:function(){var t=this;this.showingSettings=!0,this.removeListener(this.$front,"resize"),this.addListener(this.$back,"resize","updateContainerHeight"),this.$front.addClass("hidden"),setTimeout((function(){t.$settingsForm.find(":focusable:first").focus()}),1)},updateContainerHeight:function(){this.$container.height((this.showingSettings?this.$back:this.$front).height())},getWidgetLabelId:function(){return"widget-label-".concat(this.id)},getManagerRow:function(){var t=this,e=$('<tr data-id="'+this.id+'" data-name="'+(this.title?Craft.escapeHtml(this.title):this.getTypeInfo("name"))+'"><td class="widgetmanagerhud-icon thin">'+this.getTypeInfo("iconSvg")+'</td><td id="'+this.getWidgetLabelId()+'">'+this.getManagerRowLabel()+'</td><td class="widgetmanagerhud-col-colspan-picker thin"></td><td class="widgetmanagerhud-col-move thin"><a class="move icon" title="'+Craft.t("app","Reorder")+'" role="button"></a></td><td class="thin"><a class="delete icon" tabindex="0" type="button" title="'+Craft.t("app","Delete")+'" role="button" aria-label="'+Craft.t("app","Delete")+'" aria-describedby="'+this.getWidgetLabelId()+'"></a></td></tr>');return this.colspanPicker=new Craft.SlidePicker(this.getColspan(),{min:1,max:function(){return window.dashboard.grid.totalCols},step:1,label:Craft.t("app","Number of columns"),describedBy:this.getWidgetLabelId(),valueLabel:function(t){return Craft.t("app","{num, number} {num, plural, =1{column} other{columns}}",{num:t})},onChange:function(e){t.setColspan(e),window.dashboard.grid.refreshCols(!0);var n={id:t.id,colspan:e};Craft.sendActionRequest("POST","dashboard/change-widget-colspan",{data:n}).then((function(t){Craft.cp.displaySuccess(Craft.t("app","Widget saved."))})).catch((function(t){t.response,Craft.cp.displayError(Craft.t("app","Couldn’t save widget."))}))}}),this.colspanPicker.$container.appendTo(e.find("> td.widgetmanagerhud-col-colspan-picker")),window.dashboard.grid.on("refreshCols",(function(){t.colspanPicker.refresh()})),e},getLabel:function(){return this.title||this.getTypeInfo("name")},getManagerRowLabel:function(){var t=this.getTypeInfo("name");return this.title?Craft.escapeHtml(this.title)+(this.title!==t?' <span class="light">('+t+")</span>":""):t},destroy:function(){var t=this;delete window.dashboard.widgets[this.id],this.$container.addClass("scaleout"),this.base(),setTimeout((function(){window.dashboard.grid.removeItems(t.$gridItem),t.$gridItem.remove()}),200)}})})(jQuery)}()})();
//# sourceMappingURL=Dashboard.js.map